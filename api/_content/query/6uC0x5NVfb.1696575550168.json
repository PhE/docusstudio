{"_path":"/docs/team/services/portal","_dir":"services","_draft":false,"_partial":false,"_locale":"","title":"portal service","description":"portal service responds to all HTTP incoming requests.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"portal-service"},"children":[{"type":"text","value":"portal service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"portal"}]},{"type":"text","value":" service responds to all HTTP incoming requests."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"portal.drawio.svg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"brown/blue locations are for dev/prod instances."}]},{"type":"element","tag":"h2","props":{"id":"auth-service"},"children":[{"type":"text","value":"auth service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"auth service have part of its endpoints publicly reachable via "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"portal"}]},{"type":"text","value":"\nand another part filtered via "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"perm"}]},{"type":"text","value":" service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are the publicly reachable endpoints :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"/api/auth/*"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are some example of filtered endpoints :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"/api/checkout/*"}]}]}]},{"type":"element","tag":"h2","props":{"id":"docker-image"},"children":[{"type":"text","value":"docker image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The dockerfile is one folder up to access all the other static content from the docker build context."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Multi-stage dockerFile to build the portal image\nstages are :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"doc : to build the mkdocs static content"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"front_build: to build the SPA front static content"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"caddy : the webserver with the previous stages static content"}]}]},{"type":"element","tag":"h2","props":{"id":"urls"},"children":[{"type":"text","value":"URLs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"!!! danger \"outdated\"\nProbably oudated, should be updated"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Static URLS :"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"URL"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"image path"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"service"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/app/site"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"site"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/docs"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/app/docs"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"docs"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/front"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/app/front"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"front"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/mycheck"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/app/mycheck"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"dropzone"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/public"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"/app/public"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"portal"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"local-dev"},"children":[{"type":"text","value":"local dev"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To launch caddy locally :"}]},{"type":"element","tag":"pre","props":{"code":"make dev-portal\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"make dev-portal\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can set environment variables to define the behaviours of the services\n(static or proxy, proxy hostname)."}]},{"type":"element","tag":"h2","props":{"id":"misc"},"children":[{"type":"text","value":"misc"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://medium.com/flant-com/comparing-ingress-controllers-for-kubernetes-9b397483b46b","rel":["nofollow"]},"children":[{"type":"text","value":"ingress/proxy alternatives"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"auth-service","depth":2,"text":"auth service"},{"id":"docker-image","depth":2,"text":"docker image"},{"id":"urls","depth":2,"text":"URLs"},{"id":"local-dev","depth":2,"text":"local dev"},{"id":"misc","depth":2,"text":"misc"}]}},"_type":"markdown","_id":"content:10.docs:80.team:10.services:portal:index.md","_source":"content","_file":"10.docs/80.team/10.services/portal/index.md","_extension":"md"}