{"_path":"/docs/front/components/ppw-metric","_dir":"components","_draft":false,"_partial":false,"_locale":"","title":"<ppw-metric>","description":"Display a public prometheus metric.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"ppw-metric"},"children":[{"type":"text","value":"<ppw-metric>"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Display a public prometheus metric."}]},{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"PDF files"},"children":[]},{"type":"element","tag":"h2","props":{"id":"name-prop"},"children":[{"type":"text","value":"name prop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" prop is the metric name as defined in victoria metrics or prometheus :"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PDF files"}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  ::ppw-metric{name=\"node_cpu_seconds_total\"}\n  PDF files\n  ::\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::ppw-metric{name=\"node_cpu_seconds_total\"}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  PDF files"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"title-prop-or-slot"},"children":[{"type":"text","value":"title prop or slot"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"The Great Counter"},"children":[]},{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PDF files"}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\"}\n\n  ::ppw-metric{name=\"node_cpu_seconds_total\"}\n  PDF files\n  ::\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\"}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::ppw-metric{name=\"node_cpu_seconds_total\"}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  PDF files"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"desc-prop"},"children":[{"type":"text","value":"desc prop"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"The Great Counter","desc":"From the year only."},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PDF files"}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  ::ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\"}\n  PDF files\n  ::\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\"}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  PDF files"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"icon-prop"},"children":[{"type":"text","value":"icon prop"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"The Great Counter","desc":"From the year only.","icon":"uil:github"},"children":[]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" icon=\"uil:github\"}\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" icon=\"uil:github\"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"no-refresh-prop"},"children":[{"type":"text","value":"no-refresh prop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default  the metric is refreshed every 10 seconds.\nThe value displayed changes smoothly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"norefresh"}]},{"type":"text","value":" prop tell the compoenent to "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" automatically refresh the metric :"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total",":no-refresh":"true","no-refresh":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PDF files"}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  ::ppw-metric{name=\"node_cpu_seconds_total\" no-refresh}\n  PDF files\n  ::\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::ppw-metric{name=\"node_cpu_seconds_total\" no-refresh}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  PDF files"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"fake-prop"},"children":[{"type":"text","value":"fake prop"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"The Great Counter","desc":"From the year only.",":fake":"true"},"children":[]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" fake}\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" fake}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"refresh"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"force"}]},{"type":"text","value":" a metric refresh by clicking on the component."}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"The Great Counter","desc":"From the year only.",":fake":"true",":no-refresh":"true"},"children":[]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" fake no-refresh}\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  :ppw-metric{name=\"node_cpu_seconds_total\" title=\"The Great Counter\" desc=\"From the year only.\" fake no-refresh}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A realistic example :"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code-block","props":{"label":"Preview"},"children":[{"type":"element","tag":"div","props":{"class":"flex flew-row justify-around"},"children":[{"type":"element","tag":"ppw-metric","props":{"name":"starlette_requests_total?method=POST&path=//api/pdf/check/&status_code=200","title":"PDF","desc":"PDF files checked"},"children":[]},{"type":"element","tag":"ppw-metric","props":{"name":"pp_pdf_info_signers_total","title":"Signatures","desc":"Digital signatures scanned"},"children":[]},{"type":"element","tag":"ppw-metric","props":{"name":"node_cpu_seconds_total","title":"Pages","desc":"PDF pages produced",":fake":"true"},"children":[]}]}]},{"type":"element","tag":"pre","props":{"className":"language-markdown shiki shiki-themes github-light github-dark","code":"  ::div{class=\"flex flew-row justify-around\"}\n    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"PDF\" desc=\"PDF files checked\" fake}\n    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"Signatures\" desc=\"Digital signatures scanned\" fake}\n    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"Pages\" desc=\"PDF pages produced\" fake}\n  ::\n\n","filename":"Code","language":"markdown","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::div{class=\"flex flew-row justify-around\"}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"PDF\" desc=\"PDF files checked\" fake}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"Signatures\" desc=\"Digital signatures scanned\" fake}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    :ppw-metric{name=\"node_cpu_seconds_total\" title=\"Pages\" desc=\"PDF pages produced\" fake}"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ::"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"offset-prop"},"children":[{"type":"text","value":"offset prop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls as long as we remember :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls for the last 15 minutes :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all","offset":"15m"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls for the last hour :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all","offset":"1h"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls for the last week :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all","offset":"1w"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls for the current month (from day 1 to now) :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all","offset":"month"},"children":[]},{"type":"element","tag":"h2","props":{"id":"supported-metrics"},"children":[{"type":"text","value":"supported metrics"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All those metrics are also available at our "},{"type":"element","tag":"a","props":{"href":"https://arundo.tech/graf","rel":["nofollow"]},"children":[{"type":"text","value":"grafana instance"}]},{"type":"text","value":"\n(access restricted)."}]},{"type":"element","tag":"h3","props":{"id":"simplepp_pdf_info_signers_total"},"children":[{"type":"text","value":"simple/pp_pdf_info_signers_total"}]},{"type":"element","tag":"ppw-metric","props":{"name":"pp_pdf_info_signers_total"},"children":[]},{"type":"element","tag":"h3","props":{"id":"simplereferentiel_nb_checklist_defined"},"children":[{"type":"text","value":"simple/referentiel_nb_checklist_defined"}]},{"type":"element","tag":"ppw-metric","props":{"name":"referentiel_nb_checklist_defined"},"children":[]},{"type":"element","tag":"h3","props":{"id":"apipdfcheck"},"children":[{"type":"text","value":"api/pdf/check"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of PDF check for all users of all domains :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/pdf/check","domain":"all"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of PDF check for all users of this domain :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/pdf/check","domain":"self"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of PDF check for me in all domains :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/pdf/check","domain":"all","user":"1"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of PDF check for me in this domain :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/pdf/check","domain":"self","user":"1"},"children":[]},{"type":"element","tag":"h3","props":{"id":"apiall"},"children":[{"type":"text","value":"api/all"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls in this domain :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Number of my API calls in all domain :"}]},{"type":"element","tag":"ppw-metric","props":{"name":"api/all","domain":"all"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Please note it is not allowed to query API calls number for anyone else but you."}]},{"type":"element","tag":"h2","props":{"id":"todo"},"children":[{"type":"text","value":"TODO"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"show link to grafana (optional)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"show backend version"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"show frontend version"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"show frontend widgets version"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"red/green display for 0/1 metric (up)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"display a message when the metric fetch fails"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"property to change the refresh period"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"show Err on API error"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.dark .shiki span {color: var(--shiki-dark) !important;background: var(--shiki-dark-bg) !important;font-style: var(--shiki-dark-font-style) !important;font-weight: var(--shiki-dark-font-weight) !important;text-decoration: var(--shiki-dark-text-decoration) !important;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"name-prop","depth":2,"text":"name prop"},{"id":"title-prop-or-slot","depth":2,"text":"title prop or slot"},{"id":"desc-prop","depth":2,"text":"desc prop"},{"id":"icon-prop","depth":2,"text":"icon prop"},{"id":"no-refresh-prop","depth":2,"text":"no-refresh prop"},{"id":"fake-prop","depth":2,"text":"fake prop"},{"id":"refresh","depth":2,"text":"refresh"},{"id":"example","depth":2,"text":"Example"},{"id":"offset-prop","depth":2,"text":"offset prop"},{"id":"supported-metrics","depth":2,"text":"supported metrics","children":[{"id":"simplepp_pdf_info_signers_total","depth":3,"text":"simple/pp_pdf_info_signers_total"},{"id":"simplereferentiel_nb_checklist_defined","depth":3,"text":"simple/referentiel_nb_checklist_defined"},{"id":"apipdfcheck","depth":3,"text":"api/pdf/check"},{"id":"apiall","depth":3,"text":"api/all"}]},{"id":"todo","depth":2,"text":"TODO"}]}},"_type":"markdown","_id":"content:10.docs:10.front:components:ppw-metric.md","_source":"content","_file":"10.docs/10.front/components/ppw-metric.md","_extension":"md"}