{"_path":"/docs/checklist/assert_deep","_dir":"checklist","_draft":false,"_partial":false,"_locale":"","title":"Deep assert","description":"How to build a checklist that contains deep asserts into the attached documents.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"deep-assert"},"children":[{"type":"text","value":"Deep assert"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to build a checklist that contains deep asserts into the attached documents."}]},{"type":"element","tag":"h2","props":{"id":"target-document"},"children":[{"type":"text","value":"Target document"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: link to litext_FA-1303.pdf"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The target document "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"litext_FA-1303.pdf"}]},{"type":"text","value":" is an invoice with an attached order and delivery note :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The invoice follow the factur-x format (therefore contains a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"factur-x.xml"}]},{"type":"text","value":" file)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The order follow the order-x format (therefore contains a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"order-x.xml"}]},{"type":"text","value":" file)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The delivery note contains a loosely defined metadata file "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"meta.yaml"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"ppw-viz","props":{"digraph":"bgcolor=\"transparent\"\nnode [shape=none label=\"\"]\n\nsubgraph cluster1 {\n    label=\"FAxxx.pdf\"\n    bgcolor=\"lightyellow\"\n\n    subgraph cluster2 {\n        label=\"factur-x.xml\"\n        bgcolor=\"lightgreen\"\n        empty1;\n    }\n\n    subgraph cluster3 {\n        label=\"BC.pdf\"\n        bgcolor=\"turquoise\"\n        empty2;\n\n        subgraph cluster2 {\n            label=\"order-x.xml\"\n            bgcolor=\"lightgreen\"\n            empty2.1;\n        }\n    }\n\n    subgraph cluster4 {\n        label=\"BL.pdf\"\n        bgcolor=\"turquoise\"\n        empty3;\n\n        subgraph cluster2 {\n            label=\"meta.yaml\"\n            bgcolor=\"lightgreen\"\n            empty3.1;\n        }\n    }\n}\n"},"children":[]},{"type":"element","tag":"h2","props":{"id":"checklist-steps"},"children":[{"type":"text","value":"Checklist steps"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ensure the order ID is the same in all 3 documents metadata"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"More to come ..."}]}]},{"type":"element","tag":"pre","props":{"code":"assert root.metadata.x1.y1.z1 == root.attachments.bc_pdf.metadata.x2.y2.z2\nassert root.metadata.x1.y1.z1 == root.attachments.bl_pdf.metadata.x3.y3.z3\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"assert root.metadata.x1.y1.z1 == root.attachments.bc_pdf.metadata.x2.y2.z2\nassert root.metadata.x1.y1.z1 == root.attachments.bl_pdf.metadata.x3.y3.z3\n"}]}]},{"type":"element","tag":"h2","props":{"id":"checklist-wip"},"children":[{"type":"text","value":"checklist wip"}]},{"type":"element","tag":"ppw-checklist-result-static","props":{"path":"/docs/checklist/check"},"children":[]},{"type":"element","tag":"h2","props":{"id":"misc"},"children":[{"type":"text","value":"misc"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Si on focalise sur le numéro de facture :\nPour la facture, fichier factur-x.xml, on a :"}]},{"type":"element","tag":"h3","props":{"id":"bt-1-num-fact"},"children":[{"type":"text","value":"BT-1 : NUM FACT"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dict_data['rsm:CrossIndustryInvoice']['rsm:ExchangedDocument']"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'ram:ID'"}]},{"type":"text","value":" = doc"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'id'"}]}]},{"type":"element","tag":"h3","props":{"id":"bt-13-numcommande"},"children":[{"type":"text","value":"BT-13: NUMCOMMANDE"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NUMCOMMANDE = Buyer.BuyerOrderReferencedDocument.IssuerAssignedID = BC-001\ndict_data['rsm:CrossIndustryInvoice']['rsm:SupplyChainTradeTransaction']['ram:ApplicableHeaderTradeAgreement']['ram:BuyerOrderReferencedDocument']"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'ram:IssuerAssignedID'"}]},{"type":"text","value":" = doc['buyer']['buyer_order_document']"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'issuer_id'"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour le bon de commande, on a :"}]},{"type":"element","tag":"h3","props":{"id":"num-du-bc-bc-001"},"children":[{"type":"text","value":"NUM du BC : BC-001"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dict_data['rsm:SCRDMCCBDACIOMessageStructure']['rsm:ExchangedDocument']"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'ram:ID'"}]},{"type":"text","value":" = doc"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"'id'"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour le bon de livraison, on a :"}]},{"type":"element","tag":"h3","props":{"id":"num-de-préparation-62374"},"children":[{"type":"text","value":"num de préparation : 62374"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"num_confirmation"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"target-document","depth":2,"text":"Target document"},{"id":"checklist-steps","depth":2,"text":"Checklist steps"},{"id":"checklist-wip","depth":2,"text":"checklist wip"},{"id":"misc","depth":2,"text":"misc","children":[{"id":"bt-1-num-fact","depth":3,"text":"BT-1 : NUM FACT"},{"id":"bt-13-numcommande","depth":3,"text":"BT-13: NUMCOMMANDE"},{"id":"num-du-bc-bc-001","depth":3,"text":"NUM du BC : BC-001"},{"id":"num-de-préparation-62374","depth":3,"text":"num de préparation : 62374"}]}]}},"_type":"markdown","_id":"content:10.docs:20.checklist:assert_deep.md","_source":"content","_file":"10.docs/20.checklist/assert_deep.md","_extension":"md"}