{"_path":"/docs/craftform/script/drop_file","_dir":"script","_draft":false,"_partial":false,"_locale":"","title":"drop_file()","description":"Handle the dropped file (if there is one).","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"drop_file"},"children":[{"type":"text","value":"drop_file()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Handle the dropped file (if there is one)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"ppw-mermaid","props":{"def":"flowchart TD\n    drop_file --> drop_file_pdf\n    drop_file_pdf --> own_schema[\"drop_file_pdf_schema_self\"]\n    drop_file_pdf --> drop_file_pdf_schema\n    drop_file_pdf --> drop_file_pdf_schema_none\n    drop_file --> drop_file_xlsx\n    drop_file --> file_ext[\"drop_file_{ext}\"]\n    drop_file --> drop_unknown_file\n"},"children":[]},{"type":"element","tag":"h1","props":{"id":"drop_file_pdf"},"children":[{"type":"text","value":"drop_file_pdf()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When a PDF file is dropped the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drop_file_pdf"}]},{"type":"text","value":" function is called."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If not overridden in the user script, this function will first inspect the PDF."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If a schema is found in the PDF and that schema is the same as the current craftform,\nthe function "},{"type":"element","tag":"a","props":{"href":"#drop_file_pdf_schema_self"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drop_file_pdf_schema_self"}]}]},{"type":"text","value":" is called."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If a schema is found in the PDF and that schema is different from the one of the current craftform,\nthe function "},{"type":"element","tag":"a","props":{"href":"#drop_file_pdf_schema"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drop_file_pdf_schema"}]}]},{"type":"text","value":" is called."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If we find no schema, the function "},{"type":"element","tag":"a","props":{"href":"#drop_file_pdf_schema_none"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drop_file_pdf_schema_none"}]}]},{"type":"text","value":" is called."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_file_pdf_schema_self"},"children":[{"type":"text","value":"drop_file_pdf_schema_self()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If not overridden in the user script, this function will extract the metadata value of the dropped PDF and replace the current values of the form."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The PDF will not be saved in the form session."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_file_pdf_schema"},"children":[{"type":"text","value":"drop_file_pdf_schema()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If not overridden in the user script, this function will accept the PDF and save it in the form session."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_file_pdf_schema_none"},"children":[{"type":"text","value":"drop_file_pdf_schema_none()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If not overridden in the user script, this function will accept the PDF and save it in the form session."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_file_excel"},"children":[{"type":"text","value":"drop_file_excel()"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_file_ext"},"children":[{"type":"text","value":"drop_file_{ext}()"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"drop_unknown_file"},"children":[{"type":"text","value":"drop_unknown_file()"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This function must returns an instance of "},{"type":"element","tag":"a","props":{"href":"#return-uploadstatus"},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"return-uploadstatus"},"children":[{"type":"text","value":"return UploadStatus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All the "},{"type":"element","tag":"a","props":{"href":"#drop_file"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drop_*"}]},{"type":"text","value":" functions"}]},{"type":"text","value":" should return an "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"UploadStatus"}]},{"type":"text","value":".\nIt will give to the client form some information on how the upload was proceed and what to do client-side."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sample :"}]},{"type":"element","tag":"pre","props":{"className":"language-yaml shiki shiki-themes github-light github-dark","code":"status: accepted\nstored: true\nmsg: \"Your order document #344 has been added\"\n","language":"yaml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"color:#22863A;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"accepted"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"color:#22863A;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"stored"}]},{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"color:#22863A;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"msg"}]},{"type":"element","tag":"span","props":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Your order document #344 has been added\""}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"status"},"children":[{"type":"text","value":".status"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"h2","props":{"id":"stored"},"children":[{"type":"text","value":".stored"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"h2","props":{"id":"extra_files"},"children":[{"type":"text","value":".extra_files"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"h2","props":{"id":"form_overload"},"children":[{"type":"text","value":".form_overload"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"h2","props":{"id":"msg"},"children":[{"type":"text","value":".msg"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The message explaining to the user how the upload happened."}]},{"type":"element","tag":"h2","props":{"id":"schema"},"children":[{"type":"text","value":".schema"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"h2","props":{"id":"needed_options"},"children":[{"type":"text","value":".needed_options"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO: Need to be documented"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.dark .shiki span {color: var(--shiki-dark) !important;background: var(--shiki-dark-bg) !important;font-style: var(--shiki-dark-font-style) !important;font-weight: var(--shiki-dark-font-weight) !important;text-decoration: var(--shiki-dark-text-decoration) !important;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"status","depth":2,"text":".status"},{"id":"stored","depth":2,"text":".stored"},{"id":"extra_files","depth":2,"text":".extra_files"},{"id":"form_overload","depth":2,"text":".form_overload"},{"id":"msg","depth":2,"text":".msg"},{"id":"schema","depth":2,"text":".schema"},{"id":"needed_options","depth":2,"text":".needed_options"}]}},"_type":"markdown","_id":"content:10.docs:30.craftform:script:drop_file.md","_source":"content","_file":"10.docs/30.craftform/script/drop_file.md","_extension":"md"}